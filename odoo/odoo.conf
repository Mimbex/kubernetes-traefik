[options]
# ============================================
# Odoo Configuration File
# ============================================
# This file is for reference and local development.
# In Kubernetes, configuration is managed via ConfigMap.
# See: odoo/01-configmap.yaml

# ============================================
# Database Configuration
# ============================================
admin_passwd = admin
db_host = localhost
db_port = 5432
db_user = odoo
db_password = odoo
db_name = False
db_template = template0
dbfilter = .*

# ============================================
# Addons Configuration
# ============================================
addons_path = /usr/lib/python3/dist-packages/odoo/addons,/mnt/extra-addons
data_dir = /var/lib/odoo

# ============================================
# Network Configuration
# ============================================
# Proxy mode (set to True when behind reverse proxy)
proxy_mode = False

# HTTP Interface
http_interface = 0.0.0.0
http_port = 8069

# Longpolling (WebSocket) - CRITICAL for real-time features
# Required for: POS, chat, notifications, live updates
longpolling_port = 8072
gevent_port = 8072

# ============================================
# Workers Configuration
# ============================================
# workers = 0 → Single process mode (development)
# workers > 0 → Multi-process mode (production)
# Formula: workers = (CPU cores × 2) + 1

# Development (single process)
workers = 0

# Production (multi-process with gevent)
# workers = 4
# max_cron_threads = 2
# server_wide_modules = base,web

# ============================================
# Memory Limits
# ============================================
# Hard limit per worker (2.5 GB)
limit_memory_hard = 2684354560
# Soft limit per worker (2 GB)
limit_memory_soft = 2147483648

# ============================================
# Request Limits
# ============================================
limit_request = 8192
limit_time_cpu = 600
limit_time_real = 1200
limit_time_real_cron = 0

# ============================================
# Logging Configuration
# ============================================
# Log levels: debug, info, warning, error, critical
log_level = info
log_handler = :INFO

# Log to file (optional)
# logfile = /var/log/odoo/odoo.log
# logrotate = True

# ============================================
# Session Configuration
# ============================================
# Session timeout in seconds (7 days = 604800)
session_timeout = 604800

# ============================================
# Security Configuration
# ============================================
# Allow database listing
list_db = True

# In production, set to False and use dbfilter
# list_db = False
# dbfilter = ^production_db$

# ============================================
# Email Configuration
# ============================================
# SMTP server configuration
# email_from = noreply@yourdomain.com
# smtp_server = smtp.gmail.com
# smtp_port = 587
# smtp_user = your-email@gmail.com
# smtp_password = your-app-password
# smtp_ssl = False
# smtp_ssl_certificate_filename = False
# smtp_ssl_private_key_filename = False

# ============================================
# Localization
# ============================================
# Default language (ISO code)
# lang = es_PE

# Default timezone
# timezone = America/Lima

# ============================================
# Development Options
# ============================================
# Auto-reload on file changes (development only)
# dev_mode = reload,qweb,werkzeug,xml

# ============================================
# Performance Tuning
# ============================================
# Database connection pool
# db_maxconn = 64

# ============================================
# Advanced Options
# ============================================
# Unaccent search (better search for accented characters)
# unaccent = True

# CSV import limit
# import_partial = 

# ============================================
# Notes
# ============================================
# - For production, use workers > 0 and enable gevent
# - Always use proxy_mode = True when behind reverse proxy
# - Configure longpolling_port for real-time features
# - Adjust memory limits based on your server resources
# - Use strong admin_passwd in production
# - Configure SMTP for email functionality
# - Set dbfilter in production to restrict database access
